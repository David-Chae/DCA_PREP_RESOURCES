
# Setup of Repository, Selection of Storage Driver, and Installation of Docker Engine on Multiple Platforms

## Overview

This guide provides instructions on setting up a repository, selecting a storage driver, and installing Docker Engine on multiple platforms. It covers the necessary steps for Linux, Windows, and macOS.

## Setting Up a Repository

### Linux

1. **Add Docker's Official GPG Key**:
    ```bash
    # Add Docker's official GPG key:
    sudo apt-get update
    sudo apt-get install ca-certificates curl
    sudo install -m 0755 -d /etc/apt/keyrings
    sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
    sudo chmod a+r /etc/apt/keyrings/docker.asc
    ```

2. **Add Docker Repository**:
    ```bash
    # Add the repository to Apt sources:
    echo \
      "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
      $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \
      sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
    ```

3. **Update Package Repository**:
    ```bash
    sudo apt-get update
    ```

### Windows

1. **Download Docker Desktop**:
    - Visit the Docker website and download Docker Desktop for Windows.

2. **Install Docker Desktop**:
    - Follow the installation wizard to install Docker Desktop.

### macOS

1. **Download Docker Desktop**:
    - Visit the Docker website and download Docker Desktop for macOS.

2. **Install Docker Desktop**:
    - Follow the installation wizard to install Docker Desktop.

## Selection of a Storage Driver

### Overview

Docker supports several storage drivers. The choice of storage driver affects performance, stability, and compatibility. The most commonly used storage drivers are:

- **overlay2**: Default and recommended for most Linux distributions.
- **aufs**: Older driver, still available for backward compatibility.
- **btrfs**: Supports advanced features like snapshots and compression.
- **devicemapper**: Used for older systems or specific use cases.
- **vfs**: Intended for testing purposes.

### Choosing a Storage Driver

1. Stop Docker.  
```bash
sudo systemctl stop docker
```

2. Copy the contents of /var/lib/docker to a temporary location.  
```bash
cp -au /var/lib/docker /var/lib/docker.bk
````

3. If you want to use a separate backing filesystem from the one used by /var/lib/, format the filesystem and mount it into /var/lib/docker. Make sure to add this mount to /etc/fstab to make it permanent.  


4. Edit /etc/docker/daemon.json. If it doesn't yet exist, create it. Assuming that the file was empty, add the following contents.
```json
{
  "storage-driver": "overlay2"
}
```

5. Start Docker.

```bash
sudo systemctl start docker
```

6. Verify that the daemon is using the overlay2 storage driver. Use the docker info command and look for Storage Driver and Backing filesystem. 
```bash
docker info

Containers: 0
Images: 0
Storage Driver: overlay2
 Backing Filesystem: xfs
 Supports d_type: true
 Native Overlay Diff: true
<...>
```

## Installation of Docker Engine

### Linux

1. **Install Docker Engine**:
    ```bash
    sudo apt-get update
    sudo apt-get install docker-ce docker-ce-cli containerd.io
    ```

2. **Verify Installation**:
    ```bash
    docker --version
    ```

### Windows

1. **Install Docker Desktop**:
    - Follow the installation wizard to install Docker Desktop.

2. **Verify Installation**:
    - Open Docker Desktop and check the version.

### macOS

1. **Install Docker Desktop**:
    - Follow the installation wizard to install Docker Desktop.

2. **Verify Installation**:
    - Open Docker Desktop and check the version.

## Suggested Documentation

For more detailed information, refer to the following documentation:

- [Install Docker Engine](https://docs.docker.com/engine/install/)
- [Select a storage driver](https://docs.docker.com/engine/storage/drivers/select-storage-driver/)
- [Install Docker Engine on Ubuntu](https://docs.docker.com/engine/install/ubuntu/)
